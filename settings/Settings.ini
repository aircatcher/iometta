[Rainmeter]
Update=200

[Metadata]
Name=Settings

[MeasurePlayer]
Measure=NowPlaying
Plugin=NowPlaying.dll
PlayerName=#RunningPlayer#
PlayerType=STATUS
DisableLeadingZero=0

[Variables]
@include=#@#vars/global.ini
@include2=#@#vars/colors.ini
ColorPaletteW = 35
ColorPaletteH = 35
Hue=0.4
SetOFF=OFF
SetON=ON
SetNO=[\10004]
SetYES=[\10004]
W7AVol=+2

; @include3=..\process\run_check.ini

[MeterShapes]
Meter=Shape
x=0
y=0
Shape=Rectangle 0,0,#SettingsW#,#SettingsDynamicH#,#SettingsRadiusXY# | Extend BgModifier
BgModifier=Fill Color #SettingsMainColor#,#alphaFull# | StrokeWidth 3 | Stroke Color #SettingsBorderColor#,#alphaFull#

[CloseButton]
Meter=IMAGE
X=-38R
Y=5
W=30
H=30
ImageName=#@#images/x.png
; Meter=Shape
; Shape=Curve 0,0,0,0,28,29,0 | StrokeWidth 1
; Shape2=Curve 0,0,0,0,28,29,0 | Scale -1.0,1.0 | StrokeWidth 1
; Shape3=Combine Shape | Union Shape2
LeftMouseDownAction=[!ToggleConfig "iometta\settings" "Settings.ini"]

[MeterTitle]
Meter=STRING
X=5
Y=5
Text=SETTINGS
FontColor=#SettingsTextColor1#
FontSize=16
FontWeight=600

[Spacing1]
Meter=STRING
X=5
y=5R
FontColor=0,0,0

[DynamicDarkModeState]
Measure=CALC
Formula=#DynDarkModeState#
DynamicVariables=1
IfCondition=(#DynDarkModeState#=0)
IfEqualAction=[!SetOption DynamicDarkModeCheckbox Text "#SetOFF#"][!WriteKeyValue Variables SettingsMainColor "#gainsboro#" "#@#vars/colors.ini"][!WriteKeyValue Variables SettingsTextColor1 "#darkerGray#" "#@#vars/colors.ini"][!WriteKeyValue Variables SettingsTextColor2 "#white#" "#@#vars/colors.ini"][!WriteKeyValue Variables SettingsButtonColor "#darkerGray#" "#@#vars/colors.ini"]
IfAboveValue=0
IfAboveAction=[!SetOption DynamicDarkModeCheckbox Text "#SetON#"][!WriteKeyValue Variables SettingsMainColor "#darkerGray#" "#@#vars/colors.ini"][!WriteKeyValue Variables SettingsTextColor1 "#white#" "#@#vars/colors.ini"][!WriteKeyValue Variables SettingsTextColor2 "#darkerGray#" "#@#vars/colors.ini"][!WriteKeyValue Variables SettingsButtonColor "#gainsboro#" "#@#vars/colors.ini"]
[MeterSettingsDarkMode]
Meter=STRING
X=5
Y=15R
FontColor=#SettingsTextColor1#
Antialias=1
FontWeight=600
Prefix="Dark Mode"
[DynamicDarkModeCheckbox]
Meter=String
X=5R
Y=-5r
FontSize=11
FontColor=#SettingsTextColor2#
SolidColor=#SettingsButtonColor#,#alphaFull#
Padding=5,5,5,5
AntiAlias=1
DynamicVariables=1
LeftMouseDownAction=[!WriteKeyValue Variables DynDarkModeState "(1-#DynDarkModeState#)" "#@#vars/global.ini"][!UpdateMeasure DynamicDarkModeState][!Refresh "iometta\settings" "Settings.ini"][!Refresh "iometta\settings" "Settings.ini"][!Refresh "iometta"]

[Spacing2]
Meter=STRING
X=5
y=5R
FontColor=0,0,0

[PlayerClosedIgnoreState]
Measure=CALC
Formula=#HideOnClose#
DynamicVariables=1
IfCondition=(#HideOnClose#=0)
IfEqualAction=[!SetOption PlayerClosedIgnoreCheckbox Text "#SetNO#"]
IfAboveValue=0
IfAboveAction=[!SetOption PlayerClosedIgnoreCheckbox Text "#SetYES#"]

; [MeterPlayerClosedIgnoreSettings]
; Meter=STRING
; X=5
; Y=5R
; FontColor=#SettingsTextColor1#
; Antialias=1
; FontWeight=600
; Prefix="Hide skin if Media Player is not running:"
; [PlayerClosedIgnoreCheckbox]
; Meter=String
; X=5R
; Y=-5r
; FontSize=11
; FontColor=#SettingsTextColor2#,#PCIAlphaState#
; SolidColor=#SettingsButtonColor#,#alphaFull#
; Padding=5,5,5,5
; AntiAlias=1
; DynamicVariables=1
; LeftMouseDownAction=[!WriteKeyValue Variables HideOnClose "(1-#HideOnClose#)" "#@#vars/global.ini"][!WriteKeyValue Variables PCIAlphaState "(255-#PCIAlphaState#)" "#@#vars/global.ini"][!UpdateMeasure PlayerClosedIgnoreState][!Refresh "iometta\settings" "Settings.ini"][!Refresh "iometta"]

[Spacing3]
Meter=STRING
X=5
y=0R
FontColor=0,0,0

@include4=#@#controls/set_player.ini

[Spacing4]
Meter=STRING
X=5
y=5R
FontColor=0,0,0

[LabelPlayerVolumeValue]
FontColor=#SettingsTextColor1#,#alphaFull#
Antialias=1
X=55R
Y=0r
W=65
H=20

[Spacing5]
Meter=STRING
X=5
y=0R
FontColor=0,0,0

[VolumeControl]
@include5=#@#controls/volume.ini

[MeasureVisualizerSettings]
@include6=#@#controls/visualizer.ini

[Spacing6]
Meter=STRING
X=5
Y=5R
FontColor=0,0,0

[MeterColorSettings]
Meter=STRING
X=5
Y=15R
FontColor=#SettingsTextColor1#
Antialias=1
FontWeight=600
Prefix="Color Settings:"
; This is as simple as following the player's original color
; instead of choosing it manually on the settings
;;; temp note: opened=548; closed=475 ;;;
[DynamicColorState]
Measure=CALC
Formula=#DynColorState#
DynamicVariables=1
IfCondition=(#DynColorState#=0)
IfTrueAction=[!SetOption DynamicColorCheckbox Text "#SetOFF#"][!WriteKeyValue Variables SettingsDynamicH "(#SettingsH#+76)" "#@#vars/global.ini"]
IfAboveValue=0
IfAboveAction=[!SetOption DynamicColorCheckbox Text "#SetON#"][!WriteKeyValue Variables SettingsDynamicH "#SettingsH#" "#@#vars/global.ini"][!ToggleMeter ColorPaletteDarkRed][!ToggleMeter ColorPaletteRoseRed][!ToggleMeter ColorPaletteOrange][!ToggleMeter ColorPaletteBrightOrange][!ToggleMeter ColorPaletteYellow][!ToggleMeter ColorPaletteBrightGreen][!ToggleMeter ColorPaletteChartreuse][!ToggleMeter ColorPaletteGreen][!ToggleMeter ColorPaletteLimeGreen][!ToggleMeter ColorPaletteCyan][!ToggleMeter ColorPaletteLightBlue][!ToggleMeter ColorPaletteBlue][!ToggleMeter ColorPaletteMagenta][!ToggleMeter ColorPalettePink][!ToggleMeter ColorPaletteBrightPink][!ToggleMeter ColorPaletteWhite][!ToggleMeter ColorPaletteGainsboro][!ToggleMeter ColorPaletteDarkGray][!ToggleMeter ColorPaletteDarkerGray][!ToggleMeter ColorPaletteBlack][!ToggleMeter ColorPaletteMarker]
[ToggleDynamicColor]
Meter=String
X=5
Y=20r
FontSize=10
FontColor=#SettingsTextColor1#
Padding=0,5,5,5
AntiAlias=1
Text="Follow Media Player's Color:"
[DynamicColorCheckbox]
Meter=String
X=0R
Y=0r
FontSize=11
FontColor=#SettingsTextColor2#
SolidColor=#SettingsButtonColor#,#alphaFull#
Padding=5,5,5,5
AntiAlias=1
DynamicVariables=1
LeftMouseDownAction=[!WriteKeyValue Variables DynColorState "(1-#DynColorState#)" "#@#vars/global.ini"][!UpdateMeasure DynamicColorState][!Refresh "iometta" "Player.ini"][!Refresh "iometta" "Player.ini"][!Refresh "iometta\settings" "Settings.ini"][!Refresh "iometta\settings" "Settings.ini"][!Redraw]
IfCondition=(#DynColorState#=0)
IfTrueAction=[!WriteKeyValue Variables MainColor "#SelColor#" "#@#vars/colors.ini"][!Update "iometta"][!Redraw]
IfFalseAction=[!WriteKeyValue Variables MainColor "#SelColor#" "#@#vars/colors.ini"][!Update "iometta"][!Redraw]
; First Row of Color Picker
[ColorPaletteDarkRed]
Meter=Shape
X=5
Y=5R
Shape=Rectangle 0, 0, #ColorPaletteW#, #ColorPaletteH# | Fill Color #darkRed#,255 | strokeWidth 0
LeftMouseDownAction=[!WriteKeyValue Variables SelColor "#darkRed#" "#@#vars/colors.ini"][!WriteKeyValue Variables CPMarkerX "12" "#@#vars/global.ini"][!WriteKeyValue Variables CPMarkerY "-53R" "#@#vars/global.ini"][!Refresh "iometta" "Player.ini"][!Redraw][!Refresh "iometta\settings" "Settings.ini"]
[ColorPaletteRoseRed]
Meter=Shape
X=0R
Y=0r
Shape=Rectangle 0, 0, #ColorPaletteW#, #ColorPaletteH# | Fill Color #roseRed#,255 | strokeWidth 0
LeftMouseDownAction=[!WriteKeyValue Variables SelColor "#roseRed#" "#@#vars/colors.ini"][!WriteKeyValue Variables CPMarkerX "48" "#@#vars/global.ini"][!WriteKeyValue Variables CPMarkerY "-53R" "#@#vars/global.ini"][!Refresh "iometta" "Player.ini"][!Redraw][!Refresh "iometta\settings" "Settings.ini"]
[ColorPaletteOrange]
Meter=Shape
X=0R
Y=0r
Shape=Rectangle 0, 0, #ColorPaletteW#, #ColorPaletteH# | Fill Color #orange#,255 | strokeWidth 0
LeftMouseDownAction=[!WriteKeyValue Variables SelColor "#orange#" "#@#vars/colors.ini"][!WriteKeyValue Variables CPMarkerX "83" "#@#vars/global.ini"][!WriteKeyValue Variables CPMarkerY "-53R" "#@#vars/global.ini"][!Refresh "iometta" "Player.ini"][!Redraw][!Refresh "iometta\settings" "Settings.ini"]
[ColorPaletteBrightOrange]
Meter=Shape
X=0R
Y=0r
Shape=Rectangle 0, 0, #ColorPaletteW#, #ColorPaletteH# | Fill Color #brightOrange#,255 | strokeWidth 0
LeftMouseDownAction=[!WriteKeyValue Variables SelColor "#brightOrange#" "#@#vars/colors.ini"][!WriteKeyValue Variables CPMarkerX "118" "#@#vars/global.ini"][!WriteKeyValue Variables CPMarkerY "-53R" "#@#vars/global.ini"][!Refresh "iometta" "Player.ini"][!Redraw][!Refresh "iometta\settings" "Settings.ini"]
[ColorPaletteYellow]
Meter=Shape
X=0R
Y=0r
Shape=Rectangle 0, 0, #ColorPaletteW#, #ColorPaletteH# | Fill Color #yellow#,255 | strokeWidth 0
LeftMouseDownAction=[!WriteKeyValue Variables SelColor "#yellow#" "#@#vars/colors.ini"][!WriteKeyValue Variables CPMarkerX "153" "#@#vars/global.ini"][!WriteKeyValue Variables CPMarkerY "-53R" "#@#vars/global.ini"][!Refresh "iometta" "Player.ini"][!Redraw][!Refresh "iometta\settings" "Settings.ini"]
[ColorPaletteBrightGreen]
Meter=Shape
X=0R
Y=0r
Shape=Rectangle 0, 0, #ColorPaletteW#, #ColorPaletteH# | Fill Color #brightGreen#,255 | strokeWidth 0
LeftMouseDownAction=[!WriteKeyValue Variables SelColor "#brightGreen#" "#@#vars/colors.ini"][!WriteKeyValue Variables CPMarkerX "188" "#@#vars/global.ini"][!WriteKeyValue Variables CPMarkerY "-53R" "#@#vars/global.ini"][!Refresh "iometta" "Player.ini"][!Redraw][!Refresh "iometta\settings" "Settings.ini"]
[ColorPaletteChartreuse]
Meter=Shape
X=0R
Y=0r
Shape=Rectangle 0, 0, #ColorPaletteW#, #ColorPaletteH# | Fill Color #chartreuse#,255 | strokeWidth 0
LeftMouseDownAction=[!WriteKeyValue Variables SelColor "#chartreuse#" "#@#vars/colors.ini"][!WriteKeyValue Variables CPMarkerX "223" "#@#vars/global.ini"][!WriteKeyValue Variables CPMarkerY "-53R" "#@#vars/global.ini"][!Refresh "iometta" "Player.ini"][!Redraw][!Refresh "iometta\settings" "Settings.ini"]
[ColorPaletteLimeGreen]
Meter=Shape
X=0R
Y=0r
Shape=Rectangle 0, 0, #ColorPaletteW#, #ColorPaletteH# | Fill Color #limeGreen#,255 | strokeWidth 0
LeftMouseDownAction=[!WriteKeyValue Variables SelColor "#limeGreen#" "#@#vars/colors.ini"][!WriteKeyValue Variables CPMarkerX "258" "#@#vars/global.ini"][!WriteKeyValue Variables CPMarkerY "-53R" "#@#vars/global.ini"][!Refresh "iometta" "Player.ini"][!Redraw][!Refresh "iometta\settings" "Settings.ini"]
[ColorPaletteGreen]
Meter=Shape
X=0R
Y=0r
Shape=Rectangle 0, 0, #ColorPaletteW#, #ColorPaletteH# | Fill Color #green#,255 | strokeWidth 0
LeftMouseDownAction=[!WriteKeyValue Variables SelColor "#green#" "#@#vars/colors.ini"][!WriteKeyValue Variables CPMarkerX "293" "#@#vars/global.ini"][!WriteKeyValue Variables CPMarkerY "-53R" "#@#vars/global.ini"][!Refresh "iometta" "Player.ini"][!Redraw][!Refresh "iometta\settings" "Settings.ini"]
[ColorPaletteCyan]
Meter=Shape
X=0R
Y=0r
Shape=Rectangle 0, 0, #ColorPaletteW#, #ColorPaletteH# | Fill Color #cyan#,255 | strokeWidth 0
LeftMouseDownAction=[!WriteKeyValue Variables SelColor "#cyan#" "#@#vars/colors.ini"][!WriteKeyValue Variables CPMarkerX "328" "#@#vars/global.ini"][!WriteKeyValue Variables CPMarkerY "-53R" "#@#vars/global.ini"][!Refresh "iometta" "Player.ini"][!Redraw][!Refresh "iometta\settings" "Settings.ini"]
; Second Row of Color Picker
[ColorPaletteLightBlue]
Meter=Shape
X=5
Y=0R
Shape=Rectangle 0, 0, #ColorPaletteW#, #ColorPaletteH# | Fill Color #lightBlue#,255 | strokeWidth 0
LeftMouseDownAction=[!WriteKeyValue Variables SelColor "#lightBlue#" "#@#vars/colors.ini"][!WriteKeyValue Variables CPMarkerX "12" "#@#vars/global.ini"][!WriteKeyValue Variables CPMarkerY "-18R" "#@#vars/global.ini"][!Refresh "iometta" "Player.ini"][!Redraw][!Refresh "iometta\settings" "Settings.ini"]
[ColorPaletteBlue]
Meter=Shape
X=0R
Y=0r
Shape=Rectangle 0, 0, #ColorPaletteW#, #ColorPaletteH# | Fill Color #blue#,255 | strokeWidth 0
LeftMouseDownAction=[!WriteKeyValue Variables SelColor "#blue#" "#@#vars/colors.ini"][!WriteKeyValue Variables CPMarkerX "48" "#@#vars/global.ini"][!WriteKeyValue Variables CPMarkerY "-18R" "#@#vars/global.ini"][!Refresh "iometta" "Player.ini"][!Redraw][!Refresh "iometta\settings" "Settings.ini"]
[ColorPaletteMagenta]
Meter=Shape
X=0R
Y=0r
Shape=Rectangle 0, 0, #ColorPaletteW#, #ColorPaletteH# | Fill Color #magenta#,255 | strokeWidth 0
LeftMouseDownAction=[!WriteKeyValue Variables SelColor "#magenta#" "#@#vars/colors.ini"][!WriteKeyValue Variables CPMarkerX "83" "#@#vars/global.ini"][!WriteKeyValue Variables CPMarkerY "-18R" "#@#vars/global.ini"][!Refresh "iometta" "Player.ini"][!Redraw][!Refresh "iometta\settings" "Settings.ini"]
[ColorPalettePink]
Meter=Shape
X=0R
Y=0r
Shape=Rectangle 0, 0, #ColorPaletteW#, #ColorPaletteH# | Fill Color #pink#,255 | strokeWidth 0
LeftMouseDownAction=[!WriteKeyValue Variables SelColor "#pink#" "#@#vars/colors.ini"][!WriteKeyValue Variables CPMarkerX "118" "#@#vars/global.ini"][!WriteKeyValue Variables CPMarkerY "-18R" "#@#vars/global.ini"][!Refresh "iometta" "Player.ini"][!Redraw][!Refresh "iometta\settings" "Settings.ini"]
[ColorPaletteBrightPink]
Meter=Shape
X=0R
Y=0r
Shape=Rectangle 0, 0, #ColorPaletteW#, #ColorPaletteH# | Fill Color #brightPink#,255 | strokeWidth 0
LeftMouseDownAction=[!WriteKeyValue Variables SelColor "#brightPink#" "#@#vars/colors.ini"][!WriteKeyValue Variables CPMarkerX "153" "#@#vars/global.ini"][!WriteKeyValue Variables CPMarkerY "-18R" "#@#vars/global.ini"][!Refresh "iometta" "Player.ini"][!Redraw][!Refresh "iometta\settings" "Settings.ini"]
[ColorPaletteWhite]
Meter=Shape
X=0R
Y=0r
Shape=Rectangle 0, 0, #ColorPaletteW#, #ColorPaletteH# | Fill Color #white#,255 | strokeWidth 0
LeftMouseDownAction=[!WriteKeyValue Variables SelColor "#white#" "#@#vars/colors.ini"][!WriteKeyValue Variables CPMarkerX "188" "#@#vars/global.ini"][!WriteKeyValue Variables CPMarkerY "-18R" "#@#vars/global.ini"][!Refresh "iometta" "Player.ini"][!Redraw][!Refresh "iometta\settings" "Settings.ini"]
[ColorPaletteGainsboro]
Meter=Shape
X=0R
Y=0r
Shape=Rectangle 0, 0, #ColorPaletteW#, #ColorPaletteH# | Fill Color #gainsboro#,255 | strokeWidth 0
LeftMouseDownAction=[!WriteKeyValue Variables SelColor "#gainsboro#" "#@#vars/colors.ini"][!WriteKeyValue Variables CPMarkerX "223" "#@#vars/global.ini"][!WriteKeyValue Variables CPMarkerY "-18R" "#@#vars/global.ini"][!Refresh "iometta" "Player.ini"][!Redraw][!Refresh "iometta\settings" "Settings.ini"]
[ColorPaletteDarkGray]
Meter=Shape
X=0R
Y=0r
Shape=Rectangle 0, 0, #ColorPaletteW#, #ColorPaletteH# | Fill Color #darkGray#,255 | strokeWidth 0
LeftMouseDownAction=[!WriteKeyValue Variables SelColor "#darkGray#" "#@#vars/colors.ini"][!WriteKeyValue Variables CPMarkerX "258" "#@#vars/global.ini"][!WriteKeyValue Variables CPMarkerY "-18R" "#@#vars/global.ini"][!Refresh "iometta" "Player.ini"][!Redraw][!Refresh "iometta\settings" "Settings.ini"]
[ColorPaletteDarkerGray]
Meter=Shape
X=0R
Y=0r
Shape=Rectangle 0, 0, #ColorPaletteW#, #ColorPaletteH# | Fill Color #darkerGray#,255 | strokeWidth 0
LeftMouseDownAction=[!WriteKeyValue Variables SelColor "#darkerGray#" "#@#vars/colors.ini"][!WriteKeyValue Variables CPMarkerX "293" "#@#vars/global.ini"][!WriteKeyValue Variables CPMarkerY "-18R" "#@#vars/global.ini"][!Refresh "iometta" "Player.ini"][!Redraw][!Refresh "iometta\settings" "Settings.ini"]
[ColorPaletteBlack]
Meter=Shape
X=0R
Y=0r
Shape=Rectangle 0, 0, #ColorPaletteW#, #ColorPaletteH# | Fill Color #black#,255 | strokeWidth 0
LeftMouseDownAction=[!WriteKeyValue Variables SelColor "#black#" "#@#vars/colors.ini"][!WriteKeyValue Variables CPMarkerX "328" "#@#vars/global.ini"][!WriteKeyValue Variables CPMarkerY "-18R" "#@#vars/global.ini"][!Refresh "iometta" "Player.ini"][!Redraw][!Refresh "iometta\settings" "Settings.ini"]
; [MeterColorPicker]
; meter=shape
; X=0R
; Y=0r
; Rainbow=0 | ff0000 ; 0 | ffff00 ; 0.1667 | 00ff00 ; 0.3333 | 00ffff ; 0.5 | 0000ff ; 0.6667 | ff00ff ; 0.8333 | ff0000 ; 1
; Shape=rectangle 0, 0, #ColorPaletteW#, #ColorPaletteH# | strokewidth 0 | fill LinearGradient rainbow
; Shape2=Line 0,(#Hue#*[#CurrentSection#:H]),[#CurrentSection#:W],(#Hue#*[#CurrentSection#:H]) | strokeWidth 3 | strokeColor 000000
; LeftMouseDownAction=[!ToggleConfig "iometta\settings\colorpicker" "Colorpicker.ini"]
[ColorPaletteMarker]
Meter=Shape
X=#CPMarkerX#
Y=#CPMarkerY#
Shape=Path MyPath | StrokeWidth 1 | Stroke Color #black#,#alphaFull#
MyPath=LineTo 150,0 | LineTo 8,8 | LineTo 20,-7
