[VisualizerFadeControl]
Measure=CALC
DynamicVariables=1
Formula=#FadeVis#=1?(VisualizerFadeControl=90?90:VisualizerFadeControl+10):(VisualizerFadeControl=0?0:VisualizerFadeControl-10)

[PlayerStatus]
Measure=NowPlaying
PlayerName=[MeasurePlayer]
PlayerType=STATUS
IfCondition=(#HideOnClose#=1) && (#PlayerIsRunning#=0)
IfTrueAction=[!HideFade]
IfCondition2=(#PlayerIsRunning#=1)
IfTrueAction2=[!ShowFade]
IfCondition3=(#VisHeight#<0)
IfTrueAction3=[!WriteKeyValue Variables VisHeight "0" "#@#vars/global.ini"][!Refresh "iometta"]
IfCondition4=(#VisHeight#>150)
IfTrueAction4=[!WriteKeyValue Variables VisHeight "150" "#@#vars/global.ini"][!Refresh "iometta"]
IfCondition5=(#VisSensitivity#<0)
IfTrueAction5=[!WriteKeyValue Variables VisSensitivity "0" "#@#vars/global.ini"][!Refresh "iometta"]
IfCondition6=(#VisSensitivity#>100)
IfTrueAction6=[!WriteKeyValue Variables VisSensitivity "100" "#@#vars/global.ini"][!Refresh "iometta"]
IfCondition7=(#VisFallRate#<0)
IfTrueAction7=[!WriteKeyValue Variables VisFallRate "0" "#@#vars/global.ini"][!Refresh "iometta"]
IfCondition8=(#VisFallRate#>1500)
IfTrueAction8=[!WriteKeyValue Variables VisFallRate "1500" "#@#vars/global.ini"][!Refresh "iometta"]

[CoverBorder]
Meter=Image
X=0
Y=0
W=150
H=#height1#
SolidColor=#shadow#
[CoverBG]
Group=CoverVisualizer
Meter=Image
MeasureName=MeasureAlbum
X=0
Y=0
W=150
H=#height1#
Greyscale=0
SolidColor=#MainColor#,[VisualizerFadeControl]
BackgroundMode=MeterBackground
; MouseOverAction=!Execute [!SetVariable FadeVis 1]
; MouseLeaveAction=!Execute [!SetVariable FadeVis 0]
LeftMouseDownAction=[!CommandMeasure "MeasurePlayer" "OpenPlayer"]
DynamicVariables=1

; -- Measures --
[MeasureCoverImage]
Measure=NowPlaying
PlayerName=[MeasurePlayer]
PlayerType=COVER

[MeasureArtist]
Measure=NowPlaying
PlayerName=[MeasurePlayer]
PlayerType=ARTIST

[MeasureTitle]
Measure=NowPlaying
PlayerName=[MeasurePlayer]
PlayerType=TITLE

[MeasureAlbum]
Measure=NowPlaying
PlayerName=[MeasurePlayer]
PlayerType=ALBUM

; Visualizer
[MeasureAudio]
Measure=PLUGIN
Plugin=AudioLevel
Port=Output
FFTSize=1024
FFTOverlap=512
FFTAttack=50
FFTDecay=#VisFallRate#
FreqMin=50
FreqMax=12000
Sensitivity=#VisSensitivity#
Bands=25

[MeasureProgress]
Measure=NowPlaying
PlayerName=[MeasurePlayer]
PlayerType=PROGRESS
MinValue=0
MaxValue=100

[MeasureState]
Measure=NowPlaying
PlayerName=[MeasurePlayer]
PlayerType=STATE
Substitute="0":"play","1":"pause","2":"play"

; -- Meters --
[MeterCoverImage]
Group=MeterCoverImage
Meter=Image
MeasureName=MeasureCoverImage
ImageAlpha=255
W=150
H=150
MouseOverAction=[!SetOptionGroup MeterCoverImage ImageAlpha 100][!Redraw]
MouseLeaveAction=[!SetOptionGroup MeterCoverImage ImageAlpha 255][!Redraw]

[MeterProgress]
Meter=Bar
MeasureName=MeasureProgress
X=#size1#
Y=0
W=750
H=5
BarOrientation=Horizontal
BarColor=#MainColor#,200

[MeterArtist]
Meter=STRING
MeterStyle=sText
MeasureName=MeasureArtist
X=165
Y=(30)+20
W=600
H=20
StringCase=UPPER
FontSize=25
FontFace=#Font1#
StringStyle=BOLD
FontColor=#color0#
FontColor=255,255,255,255
ClipStringW=#SCREENAREAWIDTH#

[MeterTitle]
Meter=STRING
MeterStyle=sText
MeasureName=MeasureTitle
X=165
Y=(80)
W=400
H=20
StringCase=UPPER
FontFace=#Font2#
FontSize=15
FontColor=255,255,255,255
ClipStringW=#SCREENAREAWIDTH#

[MeterAlbum]
Meter=STRING
MeterStyle=sText
MeasureName=MeasureAlbum
X=165
Y=(110)-5
W=400
H=20
StringCase=UPPER
FontFace=#Font2#
FontSize=9
FontColor=255,255,255,255
ClipStringW=#SCREENAREAWIDTH#